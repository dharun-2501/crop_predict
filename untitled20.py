# -*- coding: utf-8 -*-
"""Untitled20.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1X4w1tWR3V5qaWrnFDZttS1mecbqyKcGf
"""

import seaborn as sn
from sklearn.tree import DecisionTreeClassifier
from sklearn.tree import plot_tree
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score
import matplotlib.pyplot as plt
import pandas as pd
import joblib

df=pd.read_csv('/content/crop_recommendation_dataset.csv')

df.head(5)

from sklearn.preprocessing import LabelEncoder

le=LabelEncoder()
le2=LabelEncoder()
le3=LabelEncoder()

df['new_soil']=le.fit_transform(df['Soil'])
df['new_reg']=le2.fit_transform(df['Region'])
df['new_crop']=le3.fit_transform(df['Crop'])

df.head()

df.tail()

df=df[['new_soil','new_reg','Rainfall','Temperature','Humidity','new_crop']]

df=df.dropna()

df.head()

X=df[['new_soil','new_reg','Rainfall','Temperature','Humidity']]
y=df['new_crop']

x_train,x_test,y_train,y_test=train_test_split(X,y,test_size=0.3,random_state=42)

model=DecisionTreeClassifier()

model.fit(x_train,y_train)

joblib.dump(model,'cropmodel.pkl')

pred=model.predict(x_test)

print("the accuracy score is :")
acc=accuracy_score(pred,y_test)
print(acc)

print('enter the details for selecting a better crop for farming')
soil_n=int(input("enter a soil no 0/1/2/3 "))
region= int (input('enter a region for farming 0/1/2/3'))
rain= float(input('enter a rainfall prediction or probabilities'))
temp=float(input('enter a temperature point in celsius or farenheit'))
humi=float(input('enter a humidity level of the land'))

crop_pred=model.predict([[soil_n,region,rain,temp,humi]])[0]
crop_name=le3.inverse_transform([crop_pred])[0]
print("the best crop for farming is:",crop_name)